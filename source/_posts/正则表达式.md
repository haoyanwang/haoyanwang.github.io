---
title: 正则表达式
top: false
cover: false
toc: true
mathjax: true
password:
summary:
tags:
categories:
---


# 正则表达式

正则用过就忘，只有大概的印象，总结一下，做几道题目熟练熟练

涉及到的概念
- 常用js api
- 贪婪匹配
- 先行断言、后行断言
- 单词边界断言

## 常用js api
1. str.replace(regexp, replacement)
regexp可以是正则 也可以是 字面量字符串
replacement可以是字符串也可以是函数
replacement是字符串时， $ 字符具有特定的含义
- $1、$2、...、$99 表示第 1 到第 99 个子表达式相匹配的文本
- $& 表示与 regexp 相匹配的子串
- $` 表示位于匹配子串左侧的文本
- $' 表示位于匹配子串右侧的文本
- $$ 表示直接量符号
eg.
"Doe, John" => "John Doe" ： replace(/(\w+)\s*, \s*(\w+)/, "$2 $1")
'"a", "b"' => 'a, b' ： replace(/"([^"]*)"/g, "'$1'")
replacement是函数时，返回的字符串作为替换文本，参数具有特殊含义
2. regexp.test(string)
字符串是否有匹配的模式，返回true or false
3. regexp.exec(string)
如果字符串中有匹配的值返回匹配结果数组，否则返回 null
匹配结果数组包括：第一项是匹配的结果，后面分别是子表达式匹配的结果
数组还有index、input、groups属性，这个操作还是第一次见，不过想想也合理，毕竟array底层是object
4. string.match(regexp)
找到字符串中的匹配值，返回一个结果数组

## 贪婪匹配
正则使用量词匹配时，默认趋向于更多的匹配，在量词后面加上?，则可以使用非贪婪匹配

量词匹配
- {m,n} m到n个 {m,n}?尽可能接近m个
- * 任意多个 *? 尽可能少
- + 一个或多个 +? 尽可能少
- ? 没有或一个 ?? 尽可能没有

## 先行断言、后行断言
(?=pattern) 零宽正向先行断言：代表字符串中的一个位置，紧接该位置之后的字符序列能够匹配 pattern
eg. 对 "a regular expression" 这个字符串，要想匹配 regular 中的 re，但不能匹配 expression 中的 re，可以用 re(?=gular)，该表达式限定了 re 右边的位置，这个位置之后是 gular，但并不消耗 gular 这些字符

(?!pattern) 零宽负向先行断言：代表字符串中的一个位置，紧接该位置之后的字符序列不能匹配 pattern
eg. 对 "regex represents regular expression" 这个字符串，要想匹配除 regex 和 regular 之外的 re，可以用 re(?!g)，该表达式限定了 re 右边的位置，这个位置后面不是字符 g

(?<=pattern) 零宽正向后行断言：代表字符串中的一个位置，紧接该位置之前的字符序列能够匹配 pattern
eg. 对 regex represents regular expression 这个字符串，有 4 个单词，要想匹配单词内部的 re，但不匹配单词开头的 re，可以用 (?<=\w)re，单词内部的 re，在 re 前面应该是一个单词字符

(?<!pattern) 零宽负向后行断言：代表字符串中的一个位置，紧接该位置之前的字符序列不能匹配 pattern
eg. 对 "regex represents regular expression" 这个字符串，要想匹配单词开头的 re，可以用 (?<!\w)re。单词开头的 re，在本例中，也就是指不在单词内部的 re，即 re 前面不是单词字符。当然也可以用 \bre 来匹配

在匹配过程中，不占用字符，所以被称为"零宽"


## 单词边界
可以理解为：分割单词的位置，而不是字符。既一边是单词字符（\w可以匹配的，0-9 + 26个大小写字母），另一边不是
\b 表示单词边界
\B 表示非单词边界（不常用）

eg.
(\b)some(\b) (\b)word(\b)
在这个例子中有4处单词边界
且并不代表任何字符
且不区分左右，只要满足条件就行

eg.
隐藏手机号4-7位
text.replace(/\d{4}(?=\d{4}\b)/, '****')

## codeWars
### 8 kyu（黑铁级）
1. https://www.codewars.com/kata/57e1e61ba396b3727c000251/train/javascript 
s.replace(/\d/g,'')
2. https://www.codewars.com/kata/55ccdf1512938ce3ac000056/train/javascript
我甚至没看懂这道题想干啥...
3. https://www.codewars.com/kata/567bf4f7ee34510f69000032/train/javascript
/^\d$/.test(this)
4. https://www.codewars.com/kata/56a3f08aa9a6cc9b75000023/train/javascript
/^[0-9a-z_]{4,16}$/.test(username)
5. https://www.codewars.com/kata/57a37f3cbb99449513000cd8/train/javascript
Number(s.replace(/\D/g,''))
6. https://www.codewars.com/kata/56a25ba95df27b7743000016/train/javascript
/^[123]/.test(String(code))
7. https://www.codewars.com/kata/56a946cd7bd95ccab2000055/train/javascript
str.match(/[a-z]/g) ? str.match(/[a-z]/g).length : 0

### 7 kyu（白银级）
1. https://www.codewars.com/kata/559e5b717dd758a3eb00005a
to be continued...